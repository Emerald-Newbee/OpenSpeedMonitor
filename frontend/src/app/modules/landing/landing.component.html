<img class="logo" src="/assets/OpenSpeedMonitor_dark.svg" alt="OpenSpeedMonitor"/>

<main *ngIf="hasData$ | async" [class.center]="showApplicationEmptyState$ | async">
  <section class="card applications">
    <h2>{{ 'frontend.de.iteratec.osm.landing.yourApplications' | translate }}</h2>
    <osm-empty-state *ngIf="showApplicationEmptyState$ | async" image="undraw_fast_loading.svg"
                     messageKey="frontend.de.iteratec.osm.landing.nothingSetUp"></osm-empty-state>

    <ul class="clickable-list" *ngIf="(applications$ | async)?.length">
      <li *ngFor="let application of applications$ | async">
        <a [routerLink]="['/applicationDashboard', application.id]">
          <aside>
            <osm-csi-value-small [csiValue]="application.recentCsi?.csiDocComplete"
                                 [csiDate]="application.recentCsi?.date"
                                 [lastResultDate]="application.dateOfLastResults"
                                 [showLoading]="application.csiIsLoading">
            </osm-csi-value-small>
          </aside>
          <span class="title">{{application.name}}
            <span *ngIf="application.pageCount" class="detail">
              {{ 'frontend.de.iteratec.osm.landing.page-count' | translate:{pageCount: application.pageCount} }}
            </span>
          </span>
        </a>
      </li>
    </ul>
    <a href="/measurementSetup/create" class="btn btn-primary" id="create-measurement">
      <i class="fas fa-plus"></i>
      {{ 'frontend.de.iteratec.osm.landing.setupNewMeasurement' | translate}}
    </a>
  </section>

  <section class="card">
    <h2>{{ 'frontend.de.iteratec.osm.landing.healthIssues' | translate }}</h2>

    <ng-container *ngFor="let failingJob of failingJobStatistics$ | async">
      <p class="applicationName">{{ failingJob.name }}</p>
      <ul class="clickable-list">
        <li class="error">
          <a [routerLink]="['/applicationDashboard', failingJob.id]">
            <aside class="percentage-aside">
              <p class="percentage percentage-big">{{ failingJob.percentage }}%</p>
              <p class="percentage">failure</p>
            </aside>
            <span class="title">
                job
              <span class="detail">
                browser
              </span>
            </span>
          </a>
        </li>
      </ul>
    </ng-container>

    <a href="/job/index" class="btn btn-default" id="show-jobs">
      {{ 'frontend.de.iteratec.osm.landing.showJobs' | translate }}
    </a>
  </section>
</main>
